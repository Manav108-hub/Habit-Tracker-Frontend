{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///home/manav/HABBIT-TRACKER/habit-tracker-ts/src/lib/api.ts"],"sourcesContent":["// lib/api.ts - Typed API client with full backend integration\n\nimport type {\n  User,\n  Habit,\n  Badge,\n  AIRecommendation,\n  Progress,\n  UserStats,\n  WeeklyProgress,\n  AdminAnalytics,\n  LoginRequest,\n  SignupRequest,\n  CreateHabitRequest,\n  CheckInRequest,\n  MessageResponse,\n  APIError,\n  CreateFirstAdminRequest,\n  AdminInviteRequest,\n  AdminInviteAccept,\n  AdminInvite,\n} from '@/lib/types';\n\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000/api';\n\n// Custom error class\nclass APIException extends Error {\n  constructor(public status: number, message: string) {\n    super(message);\n    this.name = 'APIException';\n  }\n}\n\n// Generic API request handler\nasync function apiRequest<T>(\n  endpoint: string,\n  options: RequestInit = {}\n): Promise<T> {\n  const url = `${API_BASE_URL}${endpoint}`;\n\n  const defaultOptions: RequestInit = {\n    credentials: 'include',\n    headers: {\n      'Content-Type': 'application/json',\n      ...options.headers,\n    },\n  };\n\n  const config = { ...defaultOptions, ...options };\n\n  try {\n    const response = await fetch(url, config);\n\n    if (response.status === 401) {\n      if (typeof window !== 'undefined') {\n        window.location.href = '/login';\n      }\n      throw new APIException(401, 'Unauthorized');\n    }\n\n    if (!response.ok) {\n      const error: APIError = await response.json();\n      throw new APIException(response.status, error.detail || 'API request failed');\n    }\n\n    return await response.json();\n  } catch (error) {\n    if (error instanceof APIException) {\n      throw error;\n    }\n    console.error('API Error:', error);\n    throw new Error('Network error or server unavailable');\n  }\n}\n\n// Authentication APIs\nexport const authAPI = {\n  signup: (data: SignupRequest): Promise<MessageResponse> =>\n    apiRequest('/signup', {\n      method: 'POST',\n      body: JSON.stringify(data),\n    }),\n\n  login: (data: LoginRequest): Promise<MessageResponse> =>\n    apiRequest('/login', {\n      method: 'POST',\n      body: JSON.stringify(data),\n    }),\n\n  logout: (): Promise<MessageResponse> =>\n    apiRequest('/logout', {\n      method: 'POST',\n    }),\n\n  createFirstAdmin: (data: CreateFirstAdminRequest): Promise<MessageResponse> =>\n    apiRequest('/create-first-admin', {\n      method: 'POST',\n      body: JSON.stringify(data),\n    }),\n\n  getCurrentUser: (): Promise<User> => apiRequest('/me'),\n};\n\n// Habit APIs\nexport const habitAPI = {\n  getAllHabits: (): Promise<Habit[]> => apiRequest('/habits'),\n\n  createHabit: (data: CreateHabitRequest): Promise<Habit> =>\n    apiRequest('/habits', {\n      method: 'POST',\n      body: JSON.stringify(data),\n    }),\n\n  checkInHabit: (\n    habitId: number,\n    data: CheckInRequest = {}\n  ): Promise<Habit> =>\n    apiRequest(`/check-in/${habitId}`, {\n      method: 'POST',\n      body: JSON.stringify(data),\n    }),\n};\n\n// Progress APIs\nexport const progressAPI = {\n  getDailyProgress: (): Promise<Progress> => apiRequest('/progress'),\n\n  getWeeklyProgress: (): Promise<WeeklyProgress> => apiRequest('/progress/weekly'),\n};\n\n// Gamification APIs\nexport const gamificationAPI = {\n  getUserStats: (): Promise<UserStats> => apiRequest('/stats'),\n\n  getBadges: (): Promise<Badge[]> => apiRequest('/badges'),\n};\n\n// AI Recommendation APIs\nexport const recommendationAPI = {\n  generateRecommendation: (\n    recommendationType: 'motivation' | 'improvement' | 'habit_suggestion'\n  ): Promise<AIRecommendation> =>\n    apiRequest('/recommendations/generate', {\n      method: 'POST',\n      body: JSON.stringify({ recommendation_type: recommendationType }),\n    }),\n\n  getRecommendations: (\n    limit: number = 10,\n    unreadOnly: boolean = false\n  ): Promise<AIRecommendation[]> =>\n    apiRequest(`/recommendations?limit=${limit}&unread_only=${unreadOnly}`),\n\n  getDailyRecommendations: (): Promise<AIRecommendation[]> =>\n    apiRequest('/recommendations/daily'),\n\n  markAsRead: (recommendationId: number): Promise<MessageResponse> =>\n    apiRequest(`/recommendations/${recommendationId}/read`, {\n      method: 'PATCH',\n    }),\n};\n\n// Admin APIs\nexport const adminAPI = {\n  getAllUsers: (): Promise<User[]> => apiRequest('/admin/users'),\n\n  createUser: (\n    email: string,\n    password: string,\n    role: string = 'user'\n  ): Promise<MessageResponse> =>\n    apiRequest('/admin/users', {\n      method: 'POST',\n      body: JSON.stringify({ email, password, role }),\n    }),\n\n  getAnalytics: (): Promise<AdminAnalytics> => apiRequest('/admin/analytics'),\n\n  inviteAdmin: (data: AdminInviteRequest): Promise<AdminInvite> =>\n    apiRequest('/admin/invite', {\n      method: 'POST',\n      body: JSON.stringify(data),\n    }),\n\n  getInvites: (): Promise<AdminInvite[]> => apiRequest('/admin/invites'),\n\n  revokeInvite: (inviteId: number): Promise<MessageResponse> =>\n    apiRequest(`/admin/invites/${inviteId}`, {\n      method: 'DELETE',\n    }),\n\n  acceptInvite: (data: AdminInviteAccept): Promise<MessageResponse> =>\n    apiRequest('/admin/accept-invite', {\n      method: 'POST',\n      body: JSON.stringify(data),\n    }),\n};\n\nexport default {\n  authAPI,\n  habitAPI,\n  progressAPI,\n  gamificationAPI,\n  recommendationAPI,\n  adminAPI,\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 174, "column": 0}, "map": {"version":3,"sources":["file:///home/manav/HABBIT-TRACKER/habit-tracker-ts/src/app/dashboard/layout.tsx"],"sourcesContent":["// src/app/dashboard/layout.tsx\n'use client';\n\nimport { usePathname, useRouter } from 'next/navigation';\nimport Link from 'next/link';\nimport { authAPI } from '@/lib/api';\nimport { useState } from 'react';\n\nexport default function DashboardLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  const pathname = usePathname();\n  const router = useRouter();\n  const [loading, setLoading] = useState(false);\n\n  const handleLogout = async () => {\n    setLoading(true);\n    try {\n      await authAPI.logout();\n      router.push('/login');\n    } catch (error) {\n      console.error('Logout failed:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const isActive = (path: string) => pathname === path;\n\n  return (\n    <div className=\"dashboard-container\">\n      {/* Sidebar */}\n      <aside className=\"dashboard-sidebar\">\n        <div className=\"sidebar-header\">\n          <div className=\"nav-logo\">\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <path d=\"M22 11.08V12a10 10 0 1 1-5.93-9.14\"/>\n              <polyline points=\"22 4 12 14.01 9 11.01\"/>\n            </svg>\n          </div>\n          <span className=\"nav-title\">HabitFlow</span>\n        </div>\n\n        <nav className=\"sidebar-nav\">\n          <Link \n            href=\"/dashboard\" \n            className={`sidebar-link ${isActive('/dashboard') ? 'active' : ''}`}\n          >\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <rect x=\"3\" y=\"3\" width=\"7\" height=\"7\"/>\n              <rect x=\"14\" y=\"3\" width=\"7\" height=\"7\"/>\n              <rect x=\"14\" y=\"14\" width=\"7\" height=\"7\"/>\n              <rect x=\"3\" y=\"14\" width=\"7\" height=\"7\"/>\n            </svg>\n            <span>Overview</span>\n          </Link>\n\n          <Link \n            href=\"/dashboard/habits\" \n            className={`sidebar-link ${isActive('/dashboard/habits') ? 'active' : ''}`}\n          >\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <polyline points=\"9 11 12 14 22 4\"/>\n              <path d=\"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11\"/>\n            </svg>\n            <span>My Habits</span>\n          </Link>\n\n          <Link \n            href=\"/dashboard/progress\" \n            className={`sidebar-link ${isActive('/dashboard/progress') ? 'active' : ''}`}\n          >\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <polyline points=\"22 12 18 12 15 21 9 3 6 12 2 12\"/>\n            </svg>\n            <span>Progress</span>\n          </Link>\n\n          <Link \n            href=\"/dashboard/recommendations\" \n            className={`sidebar-link ${isActive('/dashboard/recommendations') ? 'active' : ''}`}\n          >\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <path d=\"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z\"/>\n            </svg>\n            <span>AI Recommendations</span>\n          </Link>\n\n          <Link \n            href=\"/dashboard/badges\" \n            className={`sidebar-link ${isActive('/dashboard/badges') ? 'active' : ''}`}\n          >\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <path d=\"M6 9H4.5a2.5 2.5 0 0 1 0-5H6\"/>\n              <path d=\"M18 9h1.5a2.5 2.5 0 0 0 0-5H18\"/>\n              <path d=\"M4 22h16\"/>\n              <path d=\"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22\"/>\n              <path d=\"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22\"/>\n              <path d=\"M18 2H6v7a6 6 0 0 0 12 0V2Z\"/>\n            </svg>\n            <span>Badges</span>\n          </Link>\n        </nav>\n\n        <div className=\"sidebar-footer\">\n          <button \n            onClick={handleLogout} \n            className=\"sidebar-link\" \n            disabled={loading}\n            style={{ width: '100%', textAlign: 'left', background: 'transparent', border: 'none' }}\n          >\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <path d=\"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4\"/>\n              <polyline points=\"16 17 21 12 16 7\"/>\n              <line x1=\"21\" y1=\"12\" x2=\"9\" y2=\"12\"/>\n            </svg>\n            <span>{loading ? 'Logging out...' : 'Logout'}</span>\n          </button>\n        </div>\n      </aside>\n\n      {/* Main Content */}\n      <main className=\"dashboard-main\">\n        {children}\n      </main>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}